(function(){if(!window.postMessage||!window.addEventListener||window.ildResizerInitialized){return}window.ildResizerInitialized=!0;var a={},b=!1,c,d;a.hello=function(a,b,c){a.style.width="100%";var d=f(a);if(d){var e=g(a);if("div"===e.tagName.toLowerCase()){window.addEventListener("resize",function(){d.contentWindow.H5P.instances[0].trigger("resize")})}d.contentWindow.H5P.instances[0].on("resize",function(){setTimeout(function(){a.style.height=h(e)},25)})}a.getBoundingClientRect();c("hello")};a.prepareResize=function(a,c,d){if(b){return}setTimeout(function(){var b=f(a);if(b){var c=g(a);a.style.height=h(c);d("resizePrepared")}},50)};a.resize=function(a){b=!0;clearTimeout(c);c=setTimeout(function(){var c=f(a);if(c){var d=g(a);a.style.height=h(d);if(1>=parseInt(c.style.height)){e(a,100,50)}else{b=!1}}},100)};var e=function(a,c,i){if(!a){return}if(!c||"number"!=typeof c||50>c){c=50}if(!i||"number"!=typeof i||1>i){i=40}clearTimeout(d);d=setTimeout(function(){var d=f(a);if(d){var j=g(a),k=h(j),l=parseInt(k);if(1!==l&&0<i){a.style.height=k;b=!1}else{e(a,c,i-1)}}},c)},f=function(a){if(!a){return null}return a.contentDocument.querySelector(".h5p-iframe")||a},g=function(a){if(!a){return null}return a.contentDocument.querySelector(".h5p-iframe")||a.contentDocument.querySelector(".h5p-frame")||a.contentDocument.querySelector(".h5p-no-frame")},h=function(a){if(!a||"string"!=typeof a.tagName){return"0"}if("iframe"===a.tagName.toLowerCase()){return a.style.height}if("div"===a.tagName.toLowerCase()){return a.getBoundingClientRect().height+"px"}return"0"};window.addEventListener("message",function(b){if("h5p"!==b.data.context){return}for(var c,d=document.querySelectorAll(".ild-h5p-iframe"),e=0;e<d.length;e++){if(d[e].contentWindow===b.source){c=d[e];break}}if(!c){return}if(a[b.data.action]){a[b.data.action](c,b.data,function(a,c){if(c===void 0){c={}}c.action=a;c.context="h5p";b.source.postMessage(c,b.origin)})}},!1);for(var j=document.getElementsByTagName("iframe"),k={context:"h5p",action:"ready"},l=0;l<j.length;l++){if(-1!==j[l].src.indexOf("h5p")){j[l].contentWindow.postMessage(k,"*")}}})();
//# sourceMappingURL=ild-resizer.min.js.map
